<div id="pageTitle" class="editable"><h1>
	<a href="http://geb.codehaus.org/latest/manual/browser.html#the_browser" style="text-decoration: none; color: rgb(0, 0, 0); margin-left: 1ex; " id="pageTitlea0">The Browser</a></h1>

	<h2>
		A window into your application</h2>
</div>

<div id="s1" class="editable section running" contextmenu="section" style="background-image: none; background-position: -10px 50%; "><p>
	The entry point to Geb is the Browser class. A browser object drives an underlying WebDriver instance which drives
	the real or simulated browser and maintains an instance of the current page (if using the Page Object Pattern).</p>
</div>
<div id="s10" class="editable section synopsis running" contextmenu="section"><p>
	<a class="usdlc sourceLink" href="Setup.geb" id="s10a0" action="runnable">Setup</a></p>
</div>
<div id="s2" class="editable section synopsis running" contextmenu="section"><p>
	The Geb DSL provides an instance of a browser. It can be re-initialised for a new base URL and/or a new browser
	driver. If browse() is called without driver() first, the default driver order is assumed. If a driver is not given
	at construction time, the default order of chrome, firefox, ie or htmlunit is used. We must provide an authority
	with the first page reference. Here is an examples of how to create a <a class="usdlc sourceLink" href="BrowserInstance.geb" id="s2a0" action="runnable">browser instance</a>...
</p>
</div>
<div id="s3" class="editable section synopsis" contextmenu="section"><h1>
	The Driver</h1>
<p>
	The browser instance drives the actual browser via an instance of WebDriver, which can be specified at browser construction. The browser's driver can always be retrieved via the <a class="usdlc sourceLink" href="GetDriver.geb" id="s3a0" action="runnable">getDriver</a>() method.&nbsp;</p>
</div>

<div id="s6" class="editable section synopsis running" contextmenu="section"><h1>
	The Base URL</h1>
<div>
	Browser instances maintain a String baseUrl property that is used to complete all non absolute page URLs. For this reason the browse() method need to be called at least once with an absolute address including domain. The rest of the address can be presented at the same time or by using a page class.&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	Consider the following <a class="usdlc sourceLink" href="PageClass.geb" id="s6a0" action="runnable">page class</a>. We extend UsdlcPage to use the same authority.</div>
</div>

<div id="s15" class="editable section" contextmenu="section"><p>
	<span style="background-color:#afeeee;">for more information on the $ function and other methods seen here, see the section on navigation</span>
</p>
</div>
<div id="s5" class="editable section synopsis running" contextmenu="section"><h3>
	Lifecycle</h3>
<div>
	Geb in uSDLC internally reuses the same driver instance. This avoids the overhead of creating a new driver each time which can be significant when working with a real browser.</div>
<div>
	&nbsp;</div>
<div>
	This means that you may need to call the clearCookies() method on the browser in order to not get strange results due to cookies from previous executions.</div>
<div>
	&nbsp;</div>
<div>
	The shared driver will be closed when uSDLC shuts down.&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	A new driver can be forced at anytime by calling <a class="usdlc sourceLink" href="Reset.geb" id="s5a0" action="runnable">reset</a>().&nbsp;After calling this method, the next request for a default driver will result in a new driver instance being created. Reset must be called as the first before any geb browsing in a script.</div>
</div><div id="s9" class="editable section synopsis running" contextmenu="section"><h2>
	Changing The Page</h2>
<div>
	Typically, when the actual page that the real browser is at changes you want to change the browser's page instance to be of a new type. Or, your geb.Browser instance for one reason or another has a page instance that does not represent the actual page that the real browser is at. You can change the page instance by using the page() method on the browser object.&nbsp;</div>
<div>
	&nbsp;</div>
<div>
	Note that clicking content can <a class="usdlc sourceLink" href="ImplicitlyChangeThePage.geb" id="s9a0" action="runnable">implicitly change the page</a> type on your behalf by calling the methods below.</div>
</div>
<div id="s11" class="editable section synopsis" contextmenu="section"><h3>
	page(Class newPageType)</h3>
<p>
	The page() method that takes a single Class object does the following:&nbsp;</p>
<ul>
	<li>
		Create a new instance of the given class and connect it to the browser object</li>
	<li>
		Inform any registered [page change listeners][#pagechangelistening]</li>
	<li>
		Set the browser's page property to the new instances</li>
</ul>
<p>
	Note that it does not instruct the real browser to make a request. It simply changes the browser object's page instance.</p>
<p>
	<a class="usdlc sourceLink" href="PageClassNewPageType.geb" id="s11a0" action="runnable">Page Class newPageType</a></p>
</div>
<div id="s12" class="editable section synopsis running" contextmenu="section"><h3>
	page(List potentialPageTypes)</h3>
<p>
	The page() method that takes a list of Class objects does the following:</p>
<ul>
	<li>
		For each given page type:
		<ul>
			<li>
				Create a new instance of the given class and connect it to the browser object</li>
			<li>
				Test if the page represents the new instance by running its at checker</li>
			<li>
				If the page's at checker is successful:
				<ul>
					<li>
						Inform any registered page change listeners</li>
					<li>
						Set the browser's page property to the match</li>
					<li>
						Discard the rest of the potentials</li>
				</ul>
			</li>
			<li>
				If the page's at checker is not successful
				<ul>
					<li>
						Try the next potential&nbsp;</li>
				</ul>
			</li>
		</ul>
	</li>
</ul>
<p>
	If no match can be found from the given potentials, a geb.error.UnexpectedPageException will be thrown. Note that this method does not instruct the real browser to make a request. It simply changes the browser object's page instance.</p>
<p>
	This method exists to cater for situations where you are unsure what the page might be due to some action taken server side.<br>
	<a class="usdlc sourceLink" href="PageListPotentialPageTypes.geb" id="s12a0" action="runnable">page list potential page types</a></p>
</div>
<div id="s13" class="editable section" contextmenu="section" style="background-image: none; background-position: -10px 50%; "><h1>
	Making Requests</h1>
</div>
<div id="s14" class="editable section synopsis" contextmenu="section"><h2>
	Using Pages</h2>
<p>
	The page(Class&lt;? extends Page&gt;) method only sets the current page instance to be of a new type. To do this and make a request to the url that the page specifies, you use the<a class="usdlc sourceLink" href="ToClassExtendsPage.geb" id="s14a0" action="runnable"> to(Class&lt;? extends Page&gt;)</a> method(s).&nbsp;</p>
</div>
<div id="s16" class="editable section" contextmenu="section" style="background-image: none; background-position: -10px 50%; "><p>
	<span style="background-color:#afeeee;">see the section on Advanced Page Navigation for more information on this topic.</span>
</p>
</div>
<div id="s17" class="editable section synopsis" contextmenu="section" style="background-image: none; background-position: -10px 50%; "><h2>
	Direct</h2>
<p>
	To make a request without changing the current page type you can use <a class="usdlc sourceLink" href="TheGoMethod.geb" id="s17a0" action="runnable">the go() method</a>...&nbsp;</p>
</div>
<div id="s18" class="editable section synopsis running" contextmenu="section"><h1>
	Checking the current page</h1>
<p>
	Browser objects have an at(Class&lt;? extends Page&gt;) method that returns true or false whether or not it is actually at the given type. This works by running the given page's at verficiation.</p>
<p>
	This is typically used in conjuction with the assert keyword.&nbsp;</p>
<p>
	&nbsp;</p>
<p>
	<a class="usdlc sourceLink" href="CheckingTheCurrentPage.geb" id="s18a0" action="runnable">Checking the current page</a></p>
</div>
<div id="s19" class="editable section synopsis" contextmenu="section"><h1>
	Page Change Listening</h1>
<p>
	It is possible to be notified when a browser's page instance changes (note that this is not necessarily when the browser makes a request to a new URL) using the <a class="usdlc sourceLink" href="GebPageChangeListener.geb" id="s19a0" action="runnable">geb.PageChangeListener</a> interface. The browse method must be called first to build a browser object to work on.&nbsp;</p>
</div>
<div id="s20" class="editable section running" contextmenu="section" style="background-image: none; background-position: -10px 50%; "><p>
	As soon as a listener is registered, its pageWillChange() method will be called with newPage as the current page and
	oldPage as null. Subsequently, each time the page changes oldPage will be the page that the browser currently has,
	and newPage will be the page that will soon be the browser's page.</p>

	<p>
		You can remove remove a listener at any time.&nbsp;The removePageChangeListener() returns true if listener was
		registered and has now been removed, otherwise it returns false.</p>
	<pre>browser.removePageChangeListener(listener)</pre>
	<p>
		Listeners cannot be registered twice. If an attempt is made to register a listener that is already registered
		(i.e. there is another listener that is equal to the listener trying to register, based on their equals()
		implementation) then a geb.error.PageChangeListenerAlreadyRegisteredException will be raised.</p>
</div>





















